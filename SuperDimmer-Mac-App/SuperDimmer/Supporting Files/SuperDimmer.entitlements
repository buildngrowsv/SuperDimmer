<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <!-- 
    ====================================================================
    SuperDimmer Entitlements
    ====================================================================
    
    PURPOSE:
    Entitlements are capabilities that macOS grants to signed applications.
    These tell the system what special permissions our app needs.
    
    WHY THESE SPECIFIC ENTITLEMENTS:
    Based on analysis of reference apps (f.lux, BetterDisplay, Umbra) and
    SuperDimmer's unique requirements for brightness detection.
    
    SIGNING NOTE:
    This file must be linked in Xcode:
    Build Settings > Code Signing Entitlements > SuperDimmer.entitlements
    ====================================================================
    -->
    
    <!-- 
    ====================================================================
    SCREEN CAPTURE - CRITICAL FOR SUPERDIMMER
    ====================================================================
    This is what makes SuperDimmer unique from f.lux/Lunar/MonitorControl.
    
    Required for: CGWindowListCreateImage, CGDisplayCreateImage
    Without this: We can only capture our own app's windows (useless)
    With this: We can capture any visible content for brightness analysis
    
    User Experience:
    - macOS will prompt user to grant Screen Recording permission
    - User must manually enable in System Settings > Privacy > Screen Recording
    - We provide guidance UI to help users through this
    
    This entitlement alone doesn't grant permission - it enables the app
    to REQUEST the permission from the user.
    ====================================================================
    -->
    <key>com.apple.security.device.screen-capture</key>
    <true/>
    
    <!-- 
    ====================================================================
    NETWORK CLIENT
    ====================================================================
    Required for:
    - License validation with Paddle servers
    - Sparkle auto-update checks
    - Downloading update packages
    
    Does NOT allow: Acting as a server, accepting incoming connections
    ====================================================================
    -->
    <key>com.apple.security.network.client</key>
    <true/>
    
    <!-- 
    ====================================================================
    AUTOMATION / APPLE EVENTS
    ====================================================================
    Required for:
    - Changing system wallpapers (NSWorkspace wallpaper APIs)
    - Toggling Light/Dark appearance mode (like f.lux does)
    - AppleScript commands for system control
    
    User Experience:
    - macOS will prompt for Automation permission when first used
    - Only needed if user enables wallpaper features
    
    Based on: f.lux uses this for appearance switching, Umbra for wallpapers
    ====================================================================
    -->
    <key>com.apple.security.automation.apple-events</key>
    <true/>
    
    <!-- 
    ====================================================================
    LOCATION SERVICES
    ====================================================================
    Required for:
    - Calculating sunrise/sunset times based on user's location
    - Automatic color temperature scheduling (like f.lux)
    
    User Experience:
    - macOS will prompt for Location permission when first used
    - Optional - app works without it, user can set manual times
    - We use "When In Use" - not continuous background tracking
    
    Based on: f.lux uses location for sun-based scheduling
    ====================================================================
    -->
    <key>com.apple.security.personal-information.location</key>
    <true/>
    
    <!-- 
    ====================================================================
    APP SANDBOX - DISABLED
    ====================================================================
    We do NOT enable the App Sandbox because:
    1. Screen capture doesn't work properly in sandbox
    2. Gamma table manipulation requires direct display access
    3. Similar apps (f.lux, BetterDisplay, Lunar) are not sandboxed
    
    This means we CANNOT distribute via Mac App Store.
    We will distribute via our website + Paddle, like BetterDisplay.
    
    If we ever want MAS distribution, we'd need to heavily limit features.
    ====================================================================
    -->
    <!-- <key>com.apple.security.app-sandbox</key>
    <false/> -->
    
    <!-- 
    ====================================================================
    HARDENED RUNTIME (enabled via Xcode, not here)
    ====================================================================
    Hardened Runtime is required for notarization but configured in
    Xcode Build Settings, not entitlements.
    
    We'll need these runtime exceptions:
    - Disable Library Validation (for Paddle.framework, Sparkle.framework)
    
    This will be configured in Xcode project settings.
    ====================================================================
    -->
</dict>
</plist>
